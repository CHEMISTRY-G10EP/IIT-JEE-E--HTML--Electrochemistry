<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  
  
  <title> Quiz ‚Äì 5. molar conductance-equivalent conductance-experimental measurement-conductivity calculations</title>
  
  
  <style>
    body{font-family:Arial, sans-serif;padding:20px;background:#121212;color:#f0f0f0;}
    #logo{display:block;margin:0 auto 25px;max-width:180px;}
    #name-container{background:#1e1e1e;padding:30px;border-radius:6px;max-width:420px;margin:0 auto;}
    #name-container input{width:100%;padding:10px;margin:10px 0 15px;border:none;border-radius:4px;font-size:16px;}
    #quiz-container{display:none;}
    .question{border:1px solid #333;padding:15px;margin-bottom:20px;border-radius:5px;background:#1e1e1e;}
    .question h3{margin:0 0 10px;}
    .option-item { display: flex; align-items: center; gap: 8px; margin: 6px 0; padding: 6px 8px; border-radius: 4px; background: #2a2a2a; color: #ccc; cursor: pointer; }
    .option-item input[type="radio"] { margin: 0; }
    .submit-button,.toggle-button,.dontknow-button{margin-top:10px;padding:6px 12px;background:#007BFF;color:#fff;border:none;border-radius:4px;cursor:pointer;margin-right:5px;}
    .solution{display:none;margin-top:10px;background:#2d2d2d;padding:10px;border-left:4px solid #28a745;}
    #scorecard{background:#2d2d2d;padding:15px;border-radius:6px;margin-top:30px;display:none;}
    #timer{font-weight:bold;color:#00ffcc;}
    #studentPrintName{text-align:center;font-size:18px;font-weight:bold;margin-top:-15px;margin-bottom:5px;display:none;}
    #examDateTime{text-align:center;font-size:14px;margin-bottom:20px;display:none;}
    @media print {
      body { background: #fff; color:#000; }
      .submit-button, .dontknow-button, .toggle-button, #reportBtn, #reportModal { display:none !important; }
      #name-container { display:none !important; }
    }
    #reportBtn { position: fixed; bottom: 20px; right: 20px; background: #ff4757; color: white; border: none; padding: 12px 18px; border-radius: 50px; cursor: pointer; font-weight: bold; box-shadow: 0px 4px 10px rgba(0,0,0,0.3); z-index: 1000; }
    #reportModal { display: none; position: fixed; bottom: 80px; right: 20px; background: #1e1e1e; border: 1px solid #444; padding: 15px; border-radius: 8px; width: 260px; z-index: 1001; }
    #reportModal textarea { width: 100%; height: 80px; padding: 8px; border: none; border-radius: 4px; resize: none; font-size: 14px; }
    #reportModal button { margin-top: 10px; padding: 8px 12px; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; }
    #sendReport { background: #28a745; color: white; }
    #closeReport { background: #dc3545; color: white; margin-left: 5px; }
  </style>

  <!-- MathJax Configuration -->
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['\\(','\\)'], ['$', '$']], 
        displayMath: [['$$','$$'], ['\\[','\\]']],
        processEscapes: true
      },
      options: { skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre'] }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>

<img id="logo" src="https://i.ibb.co/WNZTWPwv/LOGO-PNG-2025-fab.png" alt="Logo" />

<div id="studentPrintName"></div>
<div id="examDateTime"></div>

<div id="name-container">
  <h2>Enter your name to begin</h2>
  <input type="text" id="studentNameInput" placeholder="Your Name" />
  <button class="submit-button" onclick="startQuiz()">Start Quiz</button>
</div>

<div id="quiz-container">


  <h2> Quiz ‚Äì 5. molar conductance-equivalent conductance-experimental measurement-conductivity calculations</h2>
  
  
  <p><strong>Time Elapsed:</strong> <span id="timer">00:00</span></p>
  <div id="questions-container"></div>

  <div style="margin-top:30px;">
    <button class="submit-button" onclick="finalSubmit()">Final Submit</button>
    <button class="submit-button" onclick="printQuestions()">Print Questions</button>
    <button class="submit-button" id="printScoreBtn" onclick="printScorecard()" style="display:none;">Save or Print Scorecard</button>
    <button class="submit-button" id="shareWhatsappBtn" style="display:none;">SHARE on WhatsApp</button>
  </div>

 <div id="scorecard">
  <h3>Your Scorecard</h3>
  <p id="scoreText"></p>
  <table id="scoreTable" border="1" cellspacing="0" cellpadding="6" style="width:100%;border-collapse:collapse;margin-top:15px;">
    <thead style="background:#333;color:#fff;">
      <tr>
        <th>Q.No</th>
        <th>Question</th>
        <th>Your Answer</th>
        <th>Correct Answer</th>
        <th>Result</th>
        <th>Solution</th>
      </tr>
    </thead>
    <tbody id="scoreDetails"></tbody>
  </table>
</div>

<button id="reportBtn">Report Mistake</button>

<div id="reportModal">
  <textarea id="reportMsg" placeholder="Describe the mistake..."></textarea>
  <div style="text-align:right;">
    <button id="sendReport">Send</button>
    <button id="closeReport">Close</button>
  </div>
</div>

<script>


const Q = [
  {
    "id": "q1",
    "text": "Which expression correctly gives the molar conductance (molar conductivity) \\(\\Lambda_m\\) in the common laboratory units?",
    "options": [
      "$\\Lambda_m = \\kappa \\times \\dfrac{1000}{c}$",
      "$\\Lambda_m = \\dfrac{\\kappa}{c}$",
      "$\\Lambda_m = \\kappa \\times c$",
      "$\\Lambda_m = \\kappa^2$"
    ],
    "correct": "A",
    "solution": "In lab practice (where \\(\\kappa\\) is in S cm‚Åª¬π and concentration \\(c\\) is in mol L‚Åª¬π), the molar conductance is given by \\(\\Lambda_m = \\kappa \\times \\dfrac{1000}{c}\\) and has units S cm¬≤ mol‚Åª¬π. (In SI units with \\(c\\) in mol m‚Åª¬≥, \\(\\Lambda_m=\\kappa/c\\).)"
  },
  {
    "id": "q2",
    "text": "The commonly used unit of molar conductance (molar conductivity) in laboratory practice is:",
    "options": [
      "S cm¬≤ mol‚Åª¬π",
      "S m¬≤ mol‚Åª¬π",
      "S cm‚Åª¬π",
      "Œ© m"
    ],
    "correct": "A",
    "solution": "Molar conductance is usually reported in S cm¬≤ mol‚Åª¬π. (The SI unit is S m¬≤ mol‚Åª¬π; 1 S cm¬≤ mol‚Åª¬π = 1e-4 S m¬≤ mol‚Åª¬π.)"
  },
  {
    "id": "q3",
    "text": "Equivalent (or equivalent) conductance \\(\\Lambda_{eq}\\) is defined by which relation (common lab units)?",
    "options": [
      "$\\Lambda_{eq} = \\kappa \\times \\dfrac{1000}{N}$",
      "$\\Lambda_{eq} = \\kappa \\times N$",
      "$\\Lambda_{eq} = \\dfrac{\\kappa}{N}$",
      "$\\Lambda_{eq} = \\kappa^2 \\times N$"
    ],
    "correct": "A",
    "solution": "Equivalent conductance in common units is given by \\(\\Lambda_{eq} = \\kappa \\times \\dfrac{1000}{N}\\), where \\(\\kappa\\) is conductivity in S cm‚Åª¬π and \\(N\\) is normality in eq L‚Åª¬π; units are S cm¬≤ equiv‚Åª¬π."
  },
  {
    "id": "q4",
    "text": "The unit of equivalent conductance is:",
    "options": [
      "S cm¬≤ equiv‚Åª¬π",
      "S cm‚Åª¬π",
      "Œ© m",
      "mol L‚Åª¬π"
    ],
    "correct": "A",
    "solution": "Equivalent conductance is usually expressed in S cm¬≤ equiv‚Åª¬π (Siemens square centimetre per equivalent)."
  },
  {
    "id": "q5",
    "text": "How is the cell constant (often denoted by \\(k_{cell}\\) or \\(l/A\\)) of a conductivity cell normally determined experimentally?",
    "options": [
      "By measuring the conductance of a standard KCl solution of known conductivity",
      "By measuring the pH of water",
      "By measuring mass of electrode material lost",
      "By measuring the emf of a cell"
    ],
    "correct": "A",
    "solution": "The cell constant is found by measuring the conductance of a standard solution (commonly KCl) whose conductivity \\(\\kappa_{std}\\) is known: \\(k_{cell}=\\kappa_{std}/G_{measured}\\) because \\(\\kappa = G \\times k_{cell}\\)."
  },
  {
    "id": "q6",
    "text": "Which relation between conductivity \\(\\kappa\\), conductance \\(G\\) and the cell constant \\(k_{cell}=l/A\\) is correct?",
    "options": [
      "$\\kappa = G \\times k_{cell}$",
      "$\\kappa = \\dfrac{G}{k_{cell}}$",
      "$G = \\kappa \\times \\dfrac{1}{k_{cell}}$",
      "$\\kappa = G^2 \\times k_{cell}$"
    ],
    "correct": "A",
    "solution": "By definition \\(G=1/R\\). Conductivity is related to G and the cell constant by \\(\\kappa = G\\times\\dfrac{l}{A}=G\\times k_{cell}\\)."
  },
  {
    "id": "q7",
    "text": "Numerical: A solution has conductivity \\(\\kappa = 1.25\\times10^{-3}\\ \\mathrm{S\\,cm^{-1}}\\) and concentration \\(c = 0.010\\ \\mathrm{mol\\,L^{-1}}\\). Calculate its molar conductance \\(\\Lambda_m\\) (in S cm¬≤ mol‚Åª¬π).",
    "options": [
      "125 S cm¬≤ mol‚Åª¬π",
      "12.5 S cm¬≤ mol‚Åª¬π",
      "250 S cm¬≤ mol‚Åª¬π",
      "1.25 S cm¬≤ mol‚Åª¬π"
    ],
    "correct": "A",
    "solution": "Use \\(\\Lambda_m = \\kappa \\times \\dfrac{1000}{c}\\).",
    "solution_steps": [
      "Step 1: Substitute: \\(\\Lambda_m = 1.25\\times10^{-3} \\times \\dfrac{1000}{0.010}\\).",
      "Step 2: Compute numerator: \\(1.25\\times10^{-3}\\times1000 = 1.25\\).",
      "Step 3: Divide by concentration: \\(1.25/0.010 = 125.0\\).",
      "Answer: \\(\\Lambda_m = 125\\ \\mathrm{S\\,cm^{2}\\,mol^{-1}}\\)."
    ]
  },
  {
    "id": "q8",
    "text": "Numerical: A conductivity cell gives a conductance \\(G = 0.020\\ \\mathrm{S}\\). The electrode separation \\(l = 1.00\\ \\mathrm{cm}\\) and electrode area \\(A = 2.00\\ \\mathrm{cm^{2}}\\). If the solution concentration is 0.020 mol L‚Åª¬π, calculate (a) conductivity \\(\\kappa\\) in S cm‚Åª¬π and (b) molar conductance \\(\\Lambda_m\\) in S cm¬≤ mol‚Åª¬π.",
    "options": [
      "(a) 0.010 S cm‚Åª¬π; (b) 500 S cm¬≤ mol‚Åª¬π",
      "(a) 0.0010 S cm‚Åª¬π; (b) 50 S cm¬≤ mol‚Åª¬π",
      "(a) 0.020 S cm‚Åª¬π; (b) 1000 S cm¬≤ mol‚Åª¬π",
      "(a) 0.0050 S cm‚Åª¬π; (b) 250 S cm¬≤ mol‚Åª¬π"
    ],
    "correct": "A",
    "solution": "Use \\(\\kappa = G \\times (l/A)\\) and \\(\\Lambda_m = \\kappa \\times 1000 / c\\).",
    "solution_steps": [
      "Step 1: Cell constant \\(l/A = 1.00/2.00 = 0.50\\ \\mathrm{cm^{-1}}\\).",
      "Step 2: \\(\\kappa = G\\times(l/A) = 0.020\\times0.50 = 0.010\\ \\mathrm{S\\,cm^{-1}}\\).",
      "Step 3: \\(\\Lambda_m = 0.010\\times1000/0.020 = 10/0.020 = 500.0\\).",
      "Answer: (a) 0.010 S cm‚Åª¬π; (b) 500 S cm¬≤ mol‚Åª¬π."
    ]
  },
  {
    "id": "q9",
    "text": "Numerical: For a solution with conductivity \\(\\kappa = 0.010\\ \\mathrm{S\\,cm^{-1}}\\), electrode separation \\(l = 2.00\\ \\mathrm{cm}\\) and electrode area \\(A = 0.50\\ \\mathrm{cm^{2}}\\), calculate the conductance \\(G\\) of the cell.",
    "options": [
      "2.5 √ó 10‚Åª¬≥ S",
      "5.0 √ó 10‚Åª¬≥ S",
      "1.0 √ó 10‚Åª¬≥ S",
      "1.0 √ó 10‚Åª¬≤ S"
    ],
    "correct": "A",
    "solution": "Conductance \\(G = \\kappa \\times (A/l)\\).",
    "solution_steps": [
      "Step 1: Compute \\(A/l = 0.50/2.00 = 0.25\\).",
      "Step 2: \\(G = 0.010 \\times 0.25 = 0.0025\\) S.",
      "Answer: \\(2.5\\times10^{-3}\\ \\mathrm{S}\\)."
    ]
  },
  {
    "id": "q10",
    "text": "Which practice is commonly used in conductivity measurements to avoid electrode polarization and electrode reactions?",
    "options": [
      "Using a direct current (DC) source across the electrodes",
      "Applying alternating current (AC) or an AC bridge at suitable frequency",
      "Using very large DC current",
      "Using non-polarisable organic electrodes only"
    ],
    "correct": "B",
    "solution": "AC (or an AC bridge) is used so ions do not get permanently discharged at electrodes (reducing polarization and electrode reactions). Measurements are typically done with small AC signals."
  },
  {
    "id": "q11",
    "text": "Numerical: If conductivity \\(\\kappa = 2.0\\times10^{-3}\\ \\mathrm{S\\,cm^{-1}}\\) and the solution normality is \\(N = 0.10\\ \\mathrm{eq\\,L^{-1}}\\), calculate the equivalent conductance \\(\\Lambda_{eq}\\) in S cm¬≤ equiv‚Åª¬π.",
    "options": [
      "20 S cm¬≤ equiv‚Åª¬π",
      "2.0 S cm¬≤ equiv‚Åª¬π",
      "200 S cm¬≤ equiv‚Åª¬π",
      "0.20 S cm¬≤ equiv‚Åª¬π"
    ],
    "correct": "A",
    "solution": "Use \\(\\Lambda_{eq} = \\kappa \\times \\dfrac{1000}{N}\\).",
    "solution_steps": [
      "Step 1: Substitute: \\(\\Lambda_{eq} = 2.0\\times10^{-3} \\times \\dfrac{1000}{0.10}\\).",
      "Step 2: Compute numerator: \\(2.0\\times10^{-3}\\times1000 = 2.0\\).",
      "Step 3: \\(2.0/0.10 = 20.0\\).",
      "Answer: \\(20\\ \\mathrm{S\\,cm^{2}\\,equiv^{-1}}\\)."
    ]
  },
  {
    "id": "q12",
    "text": "Which unit of conductivity (\\(\\kappa\\)) is most commonly used in laboratory tables and handbooks (textbook practice)?",
    "options": [
      "S cm‚Åª¬π",
      "S m‚Åª¬π",
      "mol L‚Åª¬π",
      "S cm¬≤ mol‚Åª¬π"
    ],
    "correct": "A",
    "solution": "In many laboratory contexts conductivity is expressed in S cm‚Åª¬π (Siemens per centimetre). The SI unit is S m‚Åª¬π (1 S cm‚Åª¬π = 100 S m‚Åª¬π)."
  },
  {
    "id": "q13",
    "text": "Numerical (unit conversion): Convert a conductivity value \\(\\kappa = 0.012\\ \\mathrm{S\\,cm^{-1}}\\) into SI units S m‚Åª¬π.",
    "options": [
      "1.20 S m‚Åª¬π",
      "0.012 S m‚Åª¬π",
      "120 S m‚Åª¬π",
      "0.00012 S m‚Åª¬π"
    ],
    "correct": "A",
    "solution": "1 S cm‚Åª¬π = 100 S m‚Åª¬π because 1 cm‚Åª¬π = 100 m‚Åª¬π. So multiply by 100.",
    "solution_steps": [
      "Step 1: Multiply: \\(0.012\\times100 = 1.20\\).",
      "Answer: \\(1.20\\ \\mathrm{S\\,m^{-1}}\\)."
    ]
  },
  {
    "id": "q14",
    "text": "Numerical: A conductivity measurement gives a resistance \\(R = 500\\ \\Omega\\). The cell geometry is \\(l = 2.00\\ \\mathrm{cm}\\), area \\(A = 1.00\\ \\mathrm{cm^{2}}\\). The solution concentration is 0.0100 mol L‚Åª¬π. Calculate (a) conductivity \\(\\kappa\\) in S cm‚Åª¬π and (b) molar conductance \\(\\Lambda_m\\) in S cm¬≤ mol‚Åª¬π.",
    "options": [
      "(a) 0.0040 S cm‚Åª¬π; (b) 400 S cm¬≤ mol‚Åª¬π",
      "(a) 0.0020 S cm‚Åª¬π; (b) 200 S cm¬≤ mol‚Åª¬π",
      "(a) 0.0080 S cm‚Åª¬π; (b) 800 S cm¬≤ mol‚Åª¬π",
      "(a) 0.0010 S cm‚Åª¬π; (b) 100 S cm¬≤ mol‚Åª¬π"
    ],
    "correct": "A",
    "solution": "First compute conductance \\(G=1/R\\), then cell constant \\(l/A\\), then \\(\\kappa=G(l/A)\\) and finally \\(\\Lambda_m=\\kappa\\times1000/c\\).",
    "solution_steps": [
      "Step 1: \\(G = 1/500 = 0.0020\\) S.",
      "Step 2: Cell constant \\(l/A = 2.00/1.00 = 2.00\\ \\mathrm{cm^{-1}}\\).",
      "Step 3: \\(\\kappa = G\\times(l/A) = 0.0020\\times2.00 = 0.0040\\ \\mathrm{S\\,cm^{-1}}\\).",
      "Step 4: \\(\\Lambda_m = 0.0040\\times1000/0.0100 = 4.0/0.0100 = 400.0\\).",
      "Answer: (a) 0.0040 S cm‚Åª¬π; (b) 400 S cm¬≤ mol‚Åª¬π."
    ]
  },
  {
    "id": "q15",
    "text": "Which statement about variation of molar conductance with dilution is correct?",
    "options": [
      "For weak electrolytes, molar conductance increases markedly with dilution due to increased ionisation",
      "For weak electrolytes, molar conductance decreases with dilution",
      "For strong electrolytes, molar conductance increases drastically with dilution due to increased ionisation",
      "Molar conductance is independent of dilution for all electrolytes"
    ],
    "correct": "A",
    "solution": "Weak electrolytes ionise more on dilution, so their molar conductance increases sharply with dilution (approaching a limiting value at infinite dilution). Strong electrolytes show only a small increase with dilution (due to decreasing inter-ionic interactions)."
  }
]

;



let student = '';
let timerHandle;
let printMode = '';
let examDateTime = '';

const quizTitle = document.title.split("Quiz")[1]?.trim() || document.title;

function startQuiz() {
  const name = document.getElementById('studentNameInput').value.trim();
  if (!name) { alert('Please enter your name.'); return; }
  student = name;
  examDateTime = new Date().toLocaleString();
  document.getElementById('name-container').style.display = 'none';
  document.getElementById('quiz-container').style.display = 'block';
  buildQuestions();
  if (window.MathJax) MathJax.typesetPromise();
  startTimer();
}

function buildQuestions() {
  const out = document.getElementById('questions-container');
  out.innerHTML = '';

  Q.forEach((q, index) => {
    const qText = q.text || q.question || q.prompt || ''; // tolerate different keys

    // Normalize options into an ordered array of [letter, optionText]
    let entries = [];
    if (Array.isArray(q.options)) {
      entries = q.options.map((opt, i) => [String.fromCharCode(65 + i), opt]);
    } else if (q.options && typeof q.options === 'object') {
      const keys = Object.keys(q.options);
      const keysAreLetters = keys.every(k => /^[A-Z]$/.test(k));
      if (keysAreLetters) {
        keys.sort();
        entries = keys.map(k => [k, q.options[k]]);
      } else {
        entries = keys.map((k, i) => [String.fromCharCode(65 + i), q.options[k]]);
      }
    }

    const optionsHTML = entries.map(([letter, opt]) => {
      return `<label class="option-item" for="${q.id}-${letter}">
                <input type="radio" id="${q.id}-${letter}" name="${q.id}" value="${letter}" onchange="enableSubmit('${q.id}')">
                ${letter}. ${opt}
              </label>`;
    }).join('');

    const imageHTML = q.image ? `<div><img src="${q.image}" alt="figure" style="max-width:360px; margin:10px 0; display:block;"></div>` : '';

    // Handle solution steps if they exist
let solutionStepsHTML = '';
if (q.solution_steps && Array.isArray(q.solution_steps) && q.solution_steps.length > 0) {
  solutionStepsHTML = '<ul style="margin-top:10px;">' +
    q.solution_steps.map(step => {
      if (step.includes("\n")) {
        return `<li><pre style="background:#111; padding:6px; border-radius:4px; overflow-x:auto;">${step}</pre></li>`;
      }
      return `<li>${step}</li>`;
    }).join('') +
    '</ul>';
}


    out.insertAdjacentHTML('beforeend', `
      <div class="question" id="${q.id}-wrap">
        <h3>Q${index + 1}. ${qText}</h3>
        ${imageHTML}
        <div class="options">${optionsHTML}</div>
        <div id="${q.id}-buttons">
          <button id="sub-${q.id}" class="submit-button" disabled onclick="grade('${q.id}')">Submit</button>
          <button class="dontknow-button" onclick="skip('${q.id}')">I Don‚Äôt Know</button>
        </div>
        <button class="toggle-button" id="btn-sol-${q.id}" style="display:none;" onclick="toggleSolution('sol-${q.id}')">Show Solution</button>
        <div class="solution" id="sol-${q.id}">
          <strong>Solution:</strong> ${q.solution || ''} ${solutionStepsHTML}
        </div>
      </div>
    `);
  });

  if (window.MathJax && typeof MathJax.typesetPromise === 'function') MathJax.typesetPromise();
}



function enableSubmit(qid) { document.getElementById(`sub-${qid}`).disabled = false; }

function grade(qid) {
  const q = Q.find(x => x.id === qid);
  // accept different possible field names for the correct answer
  const correct = q.correct || q.answer || q.key || q.correctAnswer;
  const chosen = document.querySelector(`input[name="${qid}"]:checked`);
  if (!chosen) return;

  // lock options
  document.querySelectorAll(`input[name="${qid}"]`).forEach(i => i.disabled = true);

  // the chosen label
  const chosenLabel = chosen.closest('label.option-item');

  // find input that matches the correct letter
  const correctInput = document.querySelector(`input[name="${qid}"][value="${correct}"]`);
  const correctLabel = correctInput ? correctInput.closest('label.option-item') : null;

  if (chosen.value === correct) {
    // correct
    if (chosenLabel) {
      chosenLabel.style.background = '#28a745';
      chosenLabel.style.color = '#fff';
    }
  } else {
    // wrong: mark chosen red, mark correct green (if found)
    if (chosenLabel) {
      chosenLabel.style.background = '#dc3545';
      chosenLabel.style.color = '#fff';
    }
    if (correctLabel) {
      correctLabel.style.background = '#28a745';
      correctLabel.style.color = '#fff';
    }
  }

  // show solution immediately
  const solElem = document.getElementById(`sol-${qid}`);
  if (solElem) solElem.style.display = "block";

  // hide the buttons for this question
  const buttons = document.getElementById(`${qid}-buttons`);
  if (buttons) buttons.style.display = "none";
  const btnSol = document.getElementById(`btn-sol-${q.id}`);
  if (btnSol) btnSol.style.display = "none";

  // re-typeset MathJax for solution if it contains LaTeX
  if (window.MathJax && typeof MathJax.typesetPromise === 'function') MathJax.typesetPromise();
}


function skip(qid) { document.querySelectorAll(`input[name="${qid}"]`).forEach(r => r.disabled = true); showSolutionButton(qid); }
function showSolutionButton(qid) { document.getElementById(`btn-sol-${qid}`).style.display = 'inline-block'; document.getElementById(`${qid}-buttons`).style.display = 'none'; }
function toggleSolution(id) { const elem = document.getElementById(id); elem.style.display = elem.style.display === 'block' ? 'none' : 'block'; }

function startTimer() {
  const display = document.getElementById('timer');
  const started = Date.now();
  timerHandle = setInterval(() => { const s = Math.floor((Date.now() - started) / 1000); display.textContent = `${String((s / 60) | 0).padStart(2,'0')}:${String(s % 60).padStart(2,'0')}`; }, 1000);
}

function finalSubmit() {
  clearInterval(timerHandle);
  document.querySelectorAll("input[type=radio]").forEach(r => r.disabled = true);
  document.querySelectorAll(".submit-button, .dontknow-button").forEach(btn => btn.style.display = "none");

  let totalMarks = 0;
  let negativeMarks = 0;
  let possibleMarks = Q.length * 4;
  let detailHTML = '';

  Q.forEach((q, index) => {
    const checked = document.querySelector(`input[name="${q.id}"]:checked`);
    const chosen = checked ? checked.value : null;

    const correctLetter = q.correct || q.answer || q.key || q.correctAnswer;

    let marks = 0;
    let resultText = "";

    if (chosen === null) {
      marks = 0;
      resultText = "‚ö™ Not Attempted / I Don‚Äôt Know (0)";
    } else if (chosen === correctLetter) {
      marks = 4;
      resultText = "‚úÖ Correct (+4)";
    } else {
      marks = -1;
      resultText = "‚ùå Incorrect (-1)";
    }

    totalMarks += marks > 0 ? marks : 0;
    negativeMarks += marks < 0 ? marks : 0;

    let solutionStepsHTML = '';
    if (q.solution_steps && Array.isArray(q.solution_steps) && q.solution_steps.length > 0) {
      solutionStepsHTML = '<ul style="margin-top:5px;">' +
        q.solution_steps.map(step => `<li>${step}</li>`).join('') +
        '</ul>';
    }

    detailHTML += `
      <tr>
        <td>${index + 1}</td>
        <td>${q.text || q.question}</td>
        <td>${chosen || 'Not Answered'}</td>
        <td>${correctLetter}</td>
        <td>${resultText}</td>
        <td>${q.solution || ''}${solutionStepsHTML}</td>
        <td>${marks}</td>
      </tr>`;
  });

  const finalScore = totalMarks + negativeMarks;

  document.getElementById('scoreText').innerHTML = `${student}, here is your result:`;
  document.getElementById('scoreDetails').innerHTML = detailHTML;

  const summaryHTML = `
    <div style="margin-top:20px; font-weight:bold;">
      <p>Total Marks (Possible): ${possibleMarks}</p>
      <p>Total Marks (Correct Answers): ${totalMarks}</p>
      <p>Negative Marks (Wrong Answers): ${negativeMarks}</p>
      <p>Final Score: ${finalScore}</p>
    </div>
  `;
  document.getElementById('scorecard').insertAdjacentHTML('beforeend', summaryHTML);

  document.getElementById('scorecard').style.display = 'block';
  document.getElementById('printScoreBtn').style.display = 'inline-block';
  document.getElementById('shareWhatsappBtn').style.display = 'inline-block';

  if (window.MathJax && typeof MathJax.typesetPromise === 'function') MathJax.typesetPromise();
}






function printQuestions() { printMode = "questions"; window.print(); }
function printScorecard() { document.getElementById("studentPrintName").innerText = student; document.getElementById("examDateTime").innerText = "Exam Date & Time: " + examDateTime; printMode = "scorecard"; window.print(); }

window.addEventListener('beforeprint', () => {
  if (printMode === "questions") { document.querySelector("#questions-container").style.display = "block"; document.querySelector("#scorecard").style.display = "none"; document.querySelector("#logo").style.display = "none"; document.querySelector("#name-container").style.display = "none"; document.querySelector("#timer").style.display = "none"; document.querySelector("#studentPrintName").style.display = "none"; document.querySelector("#examDateTime").style.display = "none"; }
  if (printMode === "scorecard") { document.querySelector("#questions-container").style.display = "none"; document.querySelector("#scorecard").style.display = "block"; document.querySelector("#logo").style.display = "block"; document.querySelector("#name-container").style.display = "none"; document.querySelector("#studentPrintName").style.display = "block"; document.querySelector("#examDateTime").style.display = "block"; }
});
window.addEventListener('afterprint', () => { document.querySelector("#questions-container").style.display = ""; document.querySelector("#scorecard").style.display = ""; document.querySelector("#logo").style.display = ""; document.querySelector("#name-container").style.display = ""; document.querySelector("#timer").style.display = ""; document.querySelector("#studentPrintName").style.display = "none"; document.querySelector("#examDateTime").style.display = "none"; });




document.getElementById("shareWhatsappBtn").addEventListener("click", function () {
  const whatsappNumber = "9108069409455";

  if (!student) {
    alert("Please complete the quiz first.");
    return;
  }

  const scoreText = document.getElementById('scoreText').innerText || "Result not available";

  let totalMarks = 0;
  let negativeMarks = 0;
  let possibleMarks = Q.length * 4;

  let details = "";

  Q.forEach((q, i) => {
    const qNum = i + 1;
    const checked = document.querySelector(`input[name="${q.id}"]:checked`);
    let userAns = checked ? checked.value : null;
    const correctAns = q.correct || q.answer || q.key || q.correctAnswer;

    let marks = 0;
    let resultText = "";

    if (userAns === null) {
      marks = 0;
      resultText = "‚ö™ Not Attempted / I Don‚Äôt Know (0)";
      userAns = "Not Answered";
    } else if (userAns === correctAns) {
      marks = 4;
      resultText = "‚úÖ Correct (+4)";
    } else {
      marks = -1;
      resultText = "‚ùå Incorrect (-1)";
    }

    totalMarks += marks > 0 ? marks : 0;
    negativeMarks += marks < 0 ? marks : 0;

    details += `Q${qNum} ‚Üí ${resultText} (Your Ans: ${userAns} | Correct: ${correctAns})\n`;
  });

  const finalScore = totalMarks + negativeMarks;

  const message = `Sir, I have shared my Test Result for checking. Thank you!\n\nüìò Quiz Title: ${quizTitle}\nüë§ Student: ${student}\n\n${scoreText}\n\nüìä Summary:\n‚úî Total Marks (Possible): ${possibleMarks}\n‚úî Total Marks (Correct Answers): ${totalMarks}\n‚úî Negative Marks (Wrong Answers): ${negativeMarks}\n‚úî Final Score: ${finalScore}\n\nDetails:\n${details}`;

  const waUrl = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`;
  window.open(waUrl, "_blank");
});


const reportBtn = document.getElementById("reportBtn");
const reportModal = document.getElementById("reportModal");
const sendReport = document.getElementById("sendReport");
const closeReport = document.getElementById("closeReport");
const reportMsg = document.getElementById("reportMsg");

reportBtn.onclick = () => { reportModal.style.display = "block"; };
closeReport.onclick = () => { reportModal.style.display = "none"; reportMsg.value = ""; };
sendReport.onclick = () => {
  const msg = reportMsg.value.trim();
  if (!msg) { alert("Please write your message before sending."); return; }
  const whatsappNumber = "9108069409455";
  const message = `‚ö†Ô∏è Reported Mistake\n\nüìò Quiz Title: ${quizTitle}\nüë§ Student: ${student || "Anonymous"}\n\nüìù Message:\n${msg}`;
  const waUrl = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`;
  window.open(waUrl, "_blank");
  reportModal.style.display = "none";
  reportMsg.value = "";
};
</script>

</body>
</html>
